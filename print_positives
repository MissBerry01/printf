nclude "main.h"
#include "print_positives.c"

/**
 * _printf - Prints formatted text into the standard output.
 * @format: String with format specifiers.
 * Return: The number of characters printed (excluding the null byte).
 */
int _printf(const char *format, ...)
{
    int printed_characters = 0;
    va_list arguments;
    va_start(arguments, format);

    while (*format)
    {
        if (*format == '%')
        {
            format++;
            if (*format == '\0')
            {
                break;
            }

            printed_characters += handle_format_specifier(format, arguments);
        }
        else
        {
            printed_characters += print_char(*format);
        }

        format++;
    }

    va_end(arguments);
    return (printed_characters);
}

/**
 * format_specifier - Handles format specifiers.
 * @format: Format specifier.
 * @arguments: Variable argument list.
 * Return: The number of characters printed.
 */
int format_specifier(const char *format, va_list arguments)
{
    int printed = 0;

    if (*format == 'c')
    {
        printed += print_char(va_arg(arguments, int));
    }
    else if (*format == 's')
    {
        printed += print_string(va_arg(arguments, char *));
    }
    else if (*format == '%')
    {
        printed += print_percent();
    }
    else if (*format == 'd' || *format == 'i')
    {
        int num = va_arg(arguments, int);
        if (num < 0)
        {
            printed += print_percent();
            printed += print_char('-');
            num = -num;
        }
        printed += print_positive_number(num);
    }
    else
    {
        printed += print_percent();
        printed += print_char(*format);
    }

    return (printed);
}
